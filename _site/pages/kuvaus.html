<!DOCTYPE html>

<!--
  portfolYOU Jekyll theme by Youssef Raafat
  Free for personal and commercial use under the MIT license
  https://github.com/YoussefRaafatNasry/portfolYOU
-->

<html lang="en" class="h-100">

<head>

  
  
  

  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:type" content="website">
  <meta property="og:title" content="Tukki web-käyttöliittymän kuvaus">
  <meta property="og:description" content="Hello world">
  <meta property="og:image" content="">

  <title>Tukki web-käyttöliittymän kuvaus</title>
  <meta name="description" content="Hello world">

  <link rel="shortcut icon" type="image/x-icon" href="/portfolio/assets/favicon.ico">

  <!-- Theme style -->
  <script src="/portfolio/assets/js/theme.js"></script>

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

  <!-- Animate CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/portfolio/assets/css/style.css">

</head>


<body class="h-100 d-flex flex-column">

  <main class="flex-shrink-0 container mt-5">
    <nav class="navbar navbar-expand-lg navbar-themed">

  <a class="navbar-brand" href="/portfolio/"><h5><b>Portfolio</b></h5></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-1x fa-bars text-themed"></i>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav ml-auto"><a class="nav-item nav-link " href="/portfolio/projects/">Projects</a>

      

      <span id="theme-toggler" class="nav-item nav-link" role="button" onclick="toggleTheme()"></span>
    </div>
  </div>

</nav>
    <h1 id="tukki-web-käyttöliittymän-kuvaus">Tukki web-käyttöliittymän kuvaus</h1>

<p>Tämä ohje sisältää yleisen kuvauksen Tukki-järjestelmän web-käyttöliittymän
eli frontendin arkkitehtuurista ja tekniikoista ohjelman ylläpitäjälle. Tiedosto
kannattaa pitää ajan tasalla. Dokumentin ymmärtämiseksi olisi hyvä tuntea perustiedot
Angularin yleisistä käsitteistä, kuten <em>moduuli</em> (<em>module</em> tai tarkemmin <em>ngModule</em>), 
<em>komponentti</em> (<em>component</em>), <em>template</em> ja <em>service</em>. Näistä voi lukea esimerkiksi
<a href="https://angular.io/guide/architecture">Angularin virallisesta dokumentaatiosta</a>.
Tiedostojen nimissä käytetään
<a href="https://angular.io/guide/styleguide#naming">Angularin suosituksia</a>, samoin
<a href="https://angular.io/guide/styleguide#overall-structural-guidelines">sovelluksen yleisessä rakenteessa</a>.</p>

<h2 id="sisällysluettelo">Sisällysluettelo</h2>

<ul>
  <li><a href="#käytetyt-tekniikat">Käytetyt tekniikat</a></li>
  <li><a href="#päämoduulit">Päämoduulit</a></li>
  <li><a href="#komponentit">Komponentit</a></li>
  <li><a href="#servicet">Servicet</a></li>
  <li><a href="#osien-välinen-kommunikaatio">Osien välinen kommunikaatio</a></li>
  <li><a href="#teema-ja-tyylit">Teema ja tyylit</a></li>
  <li><a href="#kieli-ja-käännökset">Kieli ja käännökset</a></li>
  <li><a href="#projektin-hakemistorakenne">Projektin hakemistorakenne</a></li>
  <li><a href="#uusien-testien-tekeminen">Uusien testien tekeminen</a></li>
  <li><a href="#eslint">ESLint</a></li>
  <li><a href="#ohjelmointityyli">Ohjelmointityyli</a></li>
  <li><a href="#vianmääritys">Vianmääritys</a></li>
</ul>

<h2 id="käytetyt-tekniikat">Käytetyt tekniikat</h2>

<p>Web-käyttöliittymän tekemisessä käytettyjä tekniikoita. Suurin osa näistä tulee
Angularin mukana.</p>

<ul>
  <li><a href="https://angular.io/">Angular Framework 16.2</a> - Käytetty frontend -ohjelmistokehys.</li>
  <li>HTML - Template -määrittely.</li>
  <li><a href="https://sass-lang.com/">SASS / SCSS</a> - Tyylimäärittelyissä on käytetty tätä
CSS:n esikäsittelykieliltä, jolla tehdyt tyylitiedostot kääntyvät CSS:ksi.</li>
  <li><a href="https://www.typescriptlang.org/">TypeScript 5.1</a> - JavaScriptin superset tyyppimäärityksillä.</li>
  <li><a href="https://material.angular.io/">Angular Material</a> - Komponenttikirjasto käyttöliittymäelementteille.</li>
  <li><a href="https://angular.io/guide/router">Angular Router</a> - Reititys ja navigointi.</li>
  <li><a href="https://angular.io/cli">Angular CLI</a> - Komentorivityökalu.</li>
  <li><a href="https://angular.io/guide/reactive-forms">Angular Reactive Forms</a> - Käytetty sovelluksen lomakkeissa.</li>
  <li><a href="https://fonts.google.com/icons">Material Icons</a></li>
  <li><a href="https://rxjs.dev/">RxJS</a> - Kirjasto reaktiivisen ohjelmoinnin toteuttamiseen käyttäen observableja.</li>
  <li><a href="https://compodoc.app/">Compodoc</a> - Dokumentaation generointi.</li>
  <li><a href="https://www.npmjs.com/package/ngx-editor">NgxEditor</a> - Rich-text editori -komponentti.</li>
  <li><a href="https://www.npmjs.com/">Npm 9.8</a> - Pakettien hallintaan.</li>
  <li><a href="https://nodejs.org/en">Node.js 20.5</a> - Mm. Kehityspalvelimen ajamiseen.</li>
  <li><a href="https://jasmine.github.io/">Jasmine 4.3</a> - Testaus framework yksikkötesteillle.</li>
  <li><a href="https://karma-runner.github.io/latest/index.html">Karma 6.4</a> - Testien suoritusympäristö, joka toimii Jasminen kanssa.</li>
  <li><a href="https://git-scm.com/">Git</a> - Versionhallinta.</li>
  <li><a href="https://eslint.org/">ESLint</a> - Staattinen koodinanalyysi.</li>
</ul>

<h2 id="sovelluksen-arkkitehtuuri">Sovelluksen arkkitehtuuri</h2>

<p><img src="Tukki-web-UI-arkkitehtuuri.svg" alt="Sovelluksen arkkitehtuurin kaavakuva" /></p>

<p>Kuvassa on esitetty sovelluksen arkkitehtuuria. Kuva on nähtävillä tiedostossa
documentation/kuvaus/Tukki-web-UI-arkkitehtuuri.svg. Moduulien välillä nuolet
osoittavat siihen moduuliin, jossa se on importoitu. Komponenttien välillä
parent komponentti osoittaa childiin. Seuraavissa kappaleissa on kuvattu
kuvassa näkyviä sovelluksen yksikköjä. Niiden kuvaukset on dokumentoitu myös
niiden lähdekooditiedostoihin. Niitä voi lukea automaattisesti generoidusta Compodoc
-dokumentaatiosta avaamalla verkkoselaimella tiedoston documentation/index.html.</p>

<h2 id="päämoduulit">Päämoduulit</h2>

<p>Sovellus koostuu eri Angular -päämoduuleista, jotka ovat kukin omassa hakemistossaan.
Näiden päämoduulien lisäksi eri paketit sisältävät monia omia moduuleitaan.</p>

<p>Päämoduulit sisältävät tyypillisesti seuraavat tiedostot:</p>

<ul>
  <li><strong>*.module.ts</strong> - Moduulin määritykset lukuunottamatta reitityksen määrittelyjä.</li>
  <li><strong>*.module.routing.ts</strong> - Moduulin tarjoamia reitityksen määrittelyjä.</li>
  <li><strong>*.models.ts</strong> - Moduulissä käytettyjä malleja, tyypillisesti rajapintoja,
jotka exportoidaan käytettäväksi muualla sovelluksessa.</li>
  <li><strong>*.service.ts</strong> - Moduulissa käytetty service.</li>
  <li>Komponentteja, jotka ovat omissa alihakemistoissaan.</li>
</ul>

<p>Import -lauseissa on ensin luetelty lähdekoodin (<strong>/src</strong>) ulkopuoliset lähteet,
jonka jälkeen tyhjällä rivillä erotettuna ovat lähdekoodin sisäiset.</p>

<h3 id="sovellus-koostuu-seuraavista-päämoduuleista">Sovellus koostuu seuraavista päämoduuleista</h3>

<h4 id="app--moduuli">app -moduuli</h4>

<p>Sovelluksen juurimoduuli, joka ladataan ensin ja jossa määritellään muut moduulit.
Sijaitsee hakemistossa <strong>/src/app</strong>. Sisältää alihakemistot muille moduuleille.
App -komponentin käyttämät komponentit ovat core-moduulissa.</p>

<h4 id="core--moduuli">core -moduuli</h4>

<p>Sovelluksen ydintoiminnallisuus. Importoidaan ainoastaan app.modulessa, jolloin
se voidaan pitää yksinkertaisempana. Sisältää App.modulen käyttämiä komponentteja,
kuten <em>header</em> ja <em>footer</em> ja yleisiä näkymäkomponentteja, kuten <em>home</em> ja
<em>Sivua ei löytynyt</em>, yleisiä servicejä, kuten auth.service ja error.service.
Sisältää myös http-interceptor.ts, joka logittaa HTTP-kutsuja.</p>

<h4 id="feature-moduulit">Feature moduulit</h4>

<p>Muu sovelluksen toiminnallisuus on ryhmitelty vastuualueittain näihin moduuleihin. Jokainen shared.modulea lukuunottamatta sisältää niiden toiminnallisuudesta
vastaavan servicen sekä reitityksen määrittelyt.</p>

<ul>
  <li>
    <p><strong>ticket -moduuli</strong> - Tiketteihin eli kysymyksiin liittyviä toiminnallisuus,
  kuten tikettien listaus, tikettien ja UKK:n näyttäminen ja käsittely. Alihakemistossa
  <em>components</em> on moduulissa käytettyjä, muita kuin reitteihin sidottuja komponentteja,
  kuten tiketin kommentista vastaava <em>comment</em>.</p>
  </li>
  <li>
    <p><strong>user -moduuli</strong> - Käyttäjiin liittyviä toiminnallisuus, kuten kirjautumisnäkymä,
  käyttäprofiilien näyttäminen ja käsittely.</p>
  </li>
  <li>
    <p><strong>course -moduuli</strong> - Kursseihin liittyviä toiminnallisuus, kuten kursseille
  liittyminen, sekä kurssiasetusten- ja tikettipohjien käsittely.</p>
  </li>
</ul>

<h4 id="shared--moduuli">shared -moduuli</h4>

<p>Sisältää ominaisuuksia, joita käytetään useissa muissa moduuleissa. Yleisten
<em>Material</em> -teemaan kuuluvien moduulien tuonti on jaettu omaksi <strong>material.module</strong>
-tiedostoksi. <strong>components</strong> -alihakemisto sisältää monia eri näkymien käyttämiä
komponentteja. Moduuli sisältää myös pipeja ja direktiivejä.</p>

<h2 id="komponentit">Komponentit</h2>

<p>Kukin komponentti vastaa tietystä käyttöliittymän osasta. App.module sisältää
juurikomponentin <em>AppComponent</em>, joka toimii sovelluksen näkymän perustana ja
johon reitityksestä riippuen renderöidään sitä vastaava näkymäkomponentti.
Näiden komponenttien lisäksi on rajatummasta käyttöliittymän osasta vastaavia
komponentteja, kuten header tai
tiketin kommentti. Komponentit voivat sisältää muita komponentteja. Komponentit
kuuluvat tiettyyn moduuliin ja sijaitsevat niiden hakemistossa omassa alihakemistossaan.</p>

<p>Komponentteihin hakemistot sisältävät yleensä seuraavat tiedostot:</p>

<ul>
  <li><strong>*.component.ts</strong> - Komponentin määrittely sekä sen TypeScript -luokka, joka
käsittelee komponentin näyttämisessä tarvittavaa logiikkaa.</li>
  <li><strong>*.component.html</strong> - Komponenttiin liitetty template, jonka mukaan komponentin
näkymä renderöidään.</li>
  <li><strong>*.component.scss</strong> - Templatessa käytetyt SCSS / SASS -tyylimäärittelyt.</li>
  <li><strong>*.component.spec.ts</strong> - Komponentin Jasmine -testit.</li>
  <li><strong>*.dummydata.ts</strong> - Testien käyttämää dataa.</li>
</ul>

<h2 id="servicet">Servicet</h2>

<p>Sisältävät toiminnallisuuksia, jotka eivät suoraan liity näytettävään käyttöliittymään.
Kaikki yhteydenpito backendiin tapahtuu serviceissä. Yleiset servicet ovat hakemistossa
<strong>/src/app/core/services</strong>, joiden lisäksi feature-moduuleilla on kullakin omansa
shared.modulea lukuunottamatta. Servicet ovat *.service.ts -tiedostoissa. Samassa
hakemistossa on myös vastaava *.service.spec.ts -tiedosto, jossa on servicen testit.</p>

<h3 id="eri-servicet-ja-niiden-vastuualueet">Eri servicet ja niiden vastuualueet</h3>

<h4 id="auth-service">auth service</h4>

<p>Käyttäjäautentikaatioon liittyvät toiminnot, kuten kirjautuminen sekä siihen
liittyvien tietojen käsittely. Näitä ovat esimerkiksi kirjautumisen tila ja kirjautuneen
käyttäjän tiedot. Tiedot haetaan palvelimelta ja asetetaan store.serviceen aina
reitityksen muuttuessa. Käyttäjät tunnistetaan evästeiden avulla, joka tapahtuu
web-käyttöliittymän näkökulmasta automaattisesti.</p>

<h4 id="store-service">store service</h4>

<p>Tänne tallennetaan globaali, sessionaikainen tieto RxJS behavior subjekteihin,
jonka halutaan olevan käytettävissä kaikille komponenteille ja serviceille.
Tällainen tieto on esimerkiksi kirjautuneen käyttäjän tiedot. Kts.
<a href="#sessioiden-yli-tallentuva-tieto">Sessioiden yli tallentuva tieto</a>.</p>

<h4 id="error-service">error service</h4>

<p>Serviceissä tapahtuvat virheet ohjataan ensin tänne, jossa ne logitetaan console.log:lla.
403 eli Ei oikeuksia -virhetilanteissa reititetäänä täältä sitä vastaavaan virhenäkymään.
Virheet heitetään uudelleen, jolloin komponentit voivat napata ne ja esittää ne
tarvittaessa käyttäjälle tai tehdä muita toimia. Servicellä on mahdollista myös
testausta varten generoida virheitä. HTTP-kutsuja logittaa <em>http-interceptor</em>.</p>

<h4 id="utils-service">utils service</h4>

<p>Yleishyödyllisiä funktioita, jotka eivät suoraan liity toisten serviceiden vastuualueeseen.</p>

<h3 id="feature-moduulien-servicet">Feature-moduulien servicet</h3>

<h4 id="ticket-service">ticket service</h4>

<p>Käsittelee tiketteihin eli kysymyksiin liittyviä toiminnallisuuksia, kuten
tikettien ja niiden kommenttien ja liitetiedostojen käsittely.</p>

<h4 id="course-service">course service</h4>

<p>Käsittelee kursseihin liittyviä toiminnallisuuksia, kuten kurssien hakeminen,
tikettipohjien käsittely ja kurssin tietojen tuonti ja vienti tiedostoiksi.</p>

<h4 id="user-service">user service</h4>

<p>Käsittelee käyttäjien palvelimella oleviin profiilitietoihin liittyviä
toiminnallisuuksia, kuten asetuksia, tietojen latausta ja tietojen poistoa.</p>

<h2 id="osien-välinen-kommunikaatio">Osien välinen kommunikaatio</h2>

<p>Parent- ja child komponenttien välillä tiedonvaihto tapahtuu pääosin suoraan
Angularin @Input ja @Output -dekoraattoreiden avulla. Globaali, session aikainen
tila tallennetaan <a href="#storeservice">store servicen</a> behavior subjekteihin metodikutsuilla.
Servicen injektoivat yksiköt saavat nämä tiedot metodikutsuilla, jotka palauttavat
tyypillisesti observableja. Tallennettava globaali tila on esimerkiksi kirjautumisen
tila sekä komponenttien toisilleen välittämät viestit.</p>

<p>Komponentit välittävät
muun tiedon serviceihin metodikutsuilla ja saavat palautusarvoja, jotka tyypillisesti
ovat promiseja. Sessioiden yli tallentuva tieto tallennetaan local storageen,
josta voi lukea tiedostosta documentation/kuvaus/local-storage.md. Tätä ei
käytetä sovelluksella paljon.</p>

<h2 id="teema-ja-tyylit">Teema ja tyylit</h2>

<p>Tyylimäärittelyissä käytetään <a href="https://sass-lang.com/">SASS / SCSS:ää.</a>. Yleiset
tyylimäärittelyt ovat hakemistossa <strong>src/styles/</strong>. Sovellus käyttää
<a href="https://material.angular.io/">Angular Material</a> -kirjaston kustomoitua teemaa,
jonka määrittelyt ovat tiedostossa
<strong>custom-theme.scss</strong>. <a href="https://material.angular.io/guide/theming">Tietoa teeman muokkaamisesta</a>.</p>

<p>Kaikkiin templateihin vaikuttavat määrittelyt ovat tiedostossa <strong>styles.scss</strong>.
Se sisältää kaikkialla sovelluksessa käytettyjä CSS -luokkia, joiden nimet ovat
<em>.theme-</em> -alkuisia. <strong>variables.scss</strong> sisältää joitain globaaleja variableja,
jotka voi importoida tarvittaessa komponenttien tyylitiedostoissa. Niissä
sijaitsevat komponenttikohtaiset tyylit.</p>

<p>Tyylimäärittelysäännöt on pyritty esittämään SCSS-tiedostoissa siinä järjestyksessä
kuin niihin viittaavat elementit ovat komponentin templatessa. Mahdolliset
media queryt ovat tiedoston lopussa.</p>

<h2 id="kieli-ja-käännökset">Kieli ja käännökset</h2>

<p>Angularissa käännökset voidaan natiivisti tehdä kahdella eri tavalla: yleisemmin
build-aikana tai ajonaikaisesti. Tässä sovelluksessa noudatetaan jälkimmäistä tapaa.
Kieli haetaan ja alustetaan ohjelman käynnistyessä tiedostossa <strong>src/app/app.initializers.ts</strong>.
Käännöksen vaihtaminen ajon aikana aiheuttaa aina sovelluksen uudelleenkäynnistyksen.
Tämä on normaalia. Kielen valinnan logiikka, joka tarkistetaan tässä järjestyksessä
sovelluksen alustuksessa:</p>
<ol>
  <li>Käyttäjän valikon kautta valitsema.</li>
  <li>URL-parametrina asetettu. Yleensä LTI-kautta upotuksessa.</li>
  <li>Oletus, joka upotuksessa on englanti ja muulloin suomi.</li>
</ol>

<p>Englanninkieliset käännökset sijaitsevat
tiedostossa <strong>src/assets/en-US.json</strong>. Käännökset ovat muodossa:</p>

<p><code class="language-plaintext highlighter-rouge">"Suomenkielinen käännösavain": "Englanninkielinen käännös"</code></p>

<p>Suomenkielinen, alkuperäinen teksti on komponenttien templateissa tai komponentin
koodissa. Käännös haetaan käännösavaimeen viittaamalla. Templatessa tämä tapahtuu
yleensä <em>i18n</em> - tai sen alkuisella alkuisella tunnisteella tai Angularin
interpolaatiolla komponentin muuttujaan, jossa käännös tapahtuu yleensä
<a href="https://angular.io/api/localize">$localize</a> -funktiolla.</p>

<h2 id="tietosuojaseloste">Tietosuojaseloste</h2>

<p>Tukki-tikettijärjestelmän tietosuojaseloste sijaitsee tiedostossa 
<strong>src/app/core/footer/privacy-modal/privacy-modal.component.html</strong>. Oletuksena
tietosuojaseloste sisältää Digivertaisverkko-hankkeen oman tietosuojaselosteen.
Jos järjestelmä otetaan muualla käyttöön, niin tietosuojaseloste tulee muokata
sisältämään käyttöönottaneen organisaation tiedot.</p>

<h2 id="projektin-hakemistorakenne">Projektin hakemistorakenne</h2>

<p>Tärkeitä tai huomionarvoisia  tiedostoja ja hakemistoja.</p>

<ul>
  <li><strong>angular.json</strong> - <a href="https://angular.io/guide/workspace-config">Angularin asetuksia</a>.
Mm. eri tiedostojen sijaintien määrittely.</li>
  <li><strong>package.json</strong> - <a href="https://angular.io/guide/npm-packages">Node.js -asetukset</a>,
kuten npm -skriptien määrittelyt ja pakettiriippuvuudet.</li>
  <li><strong>tsconfig.json</strong> - <a href="https://angular.io/guide/typescript-configuration">TypeScript -käännösasetukset</a>.</li>
  <li><strong>documentation/</strong> - <a href="https://compodoc.app/">Compodocilla</a> generoitu dokumentaatio.</li>
  <li><strong>.eslintrc.json</strong> - ESLint asetukset.
    <ul>
      <li><strong>index.html</strong> - Avaamalla tämän tiedoston selaimella voi lukea dokumentaatiota.</li>
      <li><strong>kuvaus/</strong> - Hakemisto, jossa kuvailevaa dokumentaatiota:
        <ul>
          <li><strong>kuvaus.md</strong> - Tämä tiedosto.</li>
          <li><strong>local-storage.md</strong> - Local storageen tallennettavat muuttujat.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>src/</strong> - Sovelluksen lähdekoodi.
    <ul>
      <li><strong>app/</strong> - <a href="#app--moduuli">App moduulin</a> hakemisto. Sisältää myös muiden
moduulien alihakemistot.</li>
      <li><strong>assets/</strong> - Logot, ikonit ja <a href="#kieli-ja-käännökset">käännökset</a>.</li>
      <li><strong>styles/</strong> - Teeman määrittely ja globaalit <a href="#teema-ja-tyylit">tyylimäärittelyt</a>.</li>
      <li><strong>main.ts</strong> - Täällä asetettu, että production buildissa ei näytetä logeja.</li>
      <li><strong>index.html</strong> - Sovelluksen selain-title, fonttien, faviconin osoitteet,
sekä mitä näytetään, jos selaimessa ei ole JavaScript -käytössä.</li>
      <li><strong>environments/</strong> - Environment -variablet. Sisältää sovelluksen nimen ja
base URL:n. Tiedostot:
        <ul>
          <li><strong>environments.ts</strong> - Development build:lle.</li>
          <li><strong>environments.prod.ts</strong> - Production build:lle.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="uusien-testien-tekeminen">Uusien testien tekeminen</h2>

<ul>
  <li>Komponenttitesteissä servicen palauttama data ja servicetesteissä palvelimen
palauttama on hyvä laittaa moduulin [moduuli nimi].dummydata.ts -tiedostoon ja
käyttää oikeita interfaceja [moduulin nimi].models.ts -tiedostoista.</li>
  <li>Käyttäjätietoja on saatavilla auth.dummydata.ts -tiedostosta.</li>
  <li>Jos testattava yksikkö käyttää store servicen -tietoja, on hyvä injektoida
testissä oikeaa service ja tallentaa haluttu data sinne.</li>
  <li>Usein on helpointa käyttää funktioita fakeAsync ja tick.</li>
  <li>Näkymän päivitys voi joissain komponenteissa tarvita toisen detectChanges -
kutsun.</li>
</ul>

<h2 id="eslint">ESLint</h2>

<ul>
  <li>ESLintillä tehdään virheiden etsintää staattisella koodinanalyysillä.</li>
  <li>Voi ajaa komennolla: “ng lint” tai “npm run lint” tai käyttää koodieditorilla (voi tarvita ESLint -pluginin).</li>
  <li>Asetukset: /.eslintrc.json.
    <ul>
      <li>Voi halutessa määritellä uusia sääntöjä.</li>
    </ul>
  </li>
</ul>

<h2 id="ohjelmointityyli">Ohjelmointityyli</h2>

<ul>
  <li>Pyritään noudattamaan yleisiä Angular, HTML, CSS/SCSS ja Typescript -tyyli-
suosituksia.</li>
  <li>Rivin pituus pyritään rajoittaa 80 merkkiin ja voivat olla enintään 90 merkkiä
käännöksiä lukuunottamatta.</li>
  <li>Jos HTML-elementtien määrittelyt ovat pituudeltaan yli tämän rajan,
järjestetään ne allekkain 1 per rivi aakkosjärjestyksessä.</li>
  <li>SCSS -attribuutit aakkosjärjestyksessä.</li>
  <li><strong>/.editorconfig</strong> sisältää yleisimpiä asetuksia, osalla editoreista tämän
käyttäminen vaatii pluginin. Kkts. <a href="https://editorconfig.org/">editorconfig.org/</a></li>
</ul>

<h2 id="vianmääritys">Vianmääritys</h2>

<h3 id="virhetilanteissa">Virhetilanteissa</h3>

<ul>
  <li>Tarkista, ilmeneekö virheitä automaattitesteissä.</li>
  <li>Tarkkaile virheilmoituksia selainkonsolissa / browser console:ssa. Developer
buildissa myös tavalliset console.log -logitukset ovat käytössä toisin kuin
production buildissa. Tällöin mm. kaikki HTTP-kutsut logitetaan.
    <ul>
      <li>Lisää tarvittaessa omia console.log -logituksia.</li>
    </ul>
  </li>
</ul>

<h3 id="jokin-elementti-näyttää-päivityksen-jälkeen-väärältä">Jokin elementti näyttää päivityksen jälkeen väärältä</h3>

<p>Jos kyseessä on Angular Materialin -elementti, voi tämä johtua muutoksesta
Angularin generoimassa CSS-luokkien nimissä. Tyylitiedostot sisältävät joitain
muokkauksia, joissa käytetään näitä luokkia. Esimerkkinä alla <em>listing</em> -komponentin
tyylitiedosto muuttaa taulukon sarakkeen otsikon väriä, jonka mukaan lajittelu tehdään.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:host ::ng-deep .mat-sort-header-content {
  color: #595959;
}
</code></pre></div></div>
<p><em>.mat-sort-header-content</em> on Angularin generoima luokka, jota ei ole templatessa.
Pelkästään templatessa oleviin elementteihin viittaamalla ei näissä tapauksissa
saataisi haluttua vaikutusta. Niihin viittaaminen voi vaatia toimiakseen
<strong>::ng-deep</strong> -yhdistäjän. Jos tämä määritys lakkaisi toimimasta, kannattaa
ensimmäisenä tarkastaa selaimen kehittäjätyökalulla, onko nimeämisessä tai
elementin rakenteessa tapahtunut muutoksia.</p>

<h3 id="child-komponentin-sisältö-ei-päivity-kun-pitäisi">Child komponentin sisältö ei päivity kun pitäisi</h3>

<p>Jos komponentin *.component.ts -tiedostossa on määritelty:</p>

<p><code class="language-plaintext highlighter-rouge">changeDetection: ChangeDetectionStrategy.OnPush</code></p>

<p>niin esimerkiksi observabjela kuunneltaessa näkymän päivittyminen pitää
tehdä manuaalisesti ChangeDetectorRef -luokan olion detectChanges() metodikutsulla.</p>

<p><a href="#tukki-web-käyttöliittymän-kuvaus">Takaisin alkuun</a></p>

  </main>
  <footer class="mt-auto py-3 text-center">

  <small class="text-muted mb-2">
    <i class="fas fa-code"></i> with <i class="fas fa-heart"></i>
    by <strong>Henri Kaustinen</strong>
  </small>

  <div class="container-fluid justify-content-center"><a class="social mx-1"  href="mailto:hkaustin@posteo.fi"
       style="color: #6c757d"
       onMouseOver="this.style.color='#db4437'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fas fa-envelope fa-1x"></i>
    </a><a class="social mx-1"  href="https://www.github.com/nkahe"
       style="color: #6c757d"
       onMouseOver="this.style.color='#333333'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-github fa-1x"></i>
    </a><a class="social mx-1"  href="https://www.linkedin.com/in/hkaustin"
       style="color: #6c757d"
       onMouseOver="this.style.color='#007bb5'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-linkedin-in fa-1x"></i>
    </a>

</div><small id="attribution">
    theme <a href="https://github.com/YoussefRaafatNasry/portfolYOU">portfolYOU</a>
  </small>

</footer>

  
  <!-- GitHub Buttons -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- jQuery CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Popper.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

<!-- Bootstrap JS CDN -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- wow.js CDN & Activation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
<script> new WOW().init(); </script>

<!-- Initialize all tooltips -->
<script>
$(function () {
    $('[data-toggle="tooltip"]').tooltip()
})
</script>
</body>

</html>